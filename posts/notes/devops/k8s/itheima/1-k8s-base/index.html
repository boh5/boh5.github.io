<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>K8s 学习笔记（一）基础 - 黄波的博客</title><meta name=author content="黄波"><meta name=author-link content="https://dilless.github.io"><meta name=description content="1. Kubernetes 介绍 1.1 应用部署方式的演变 直接部署在物理机 -> 虚拟化部署 -> 容器化部署 容器化部署方式给带来很多的便利，但是也会出现一些问题，比如说： 一个容器故"><meta name=keywords content="K8s,Kubernetes,基础"><meta itemprop=name content="K8s 学习笔记（一）基础"><meta itemprop=description content="1. Kubernetes 介绍 1.1 应用部署方式的演变 直接部署在物理机 -> 虚拟化部署 -> 容器化部署 容器化部署方式给带来很多的便利，但是也会出现一些问题，比如说： 一个容器故"><meta itemprop=datePublished content="2022-08-19T00:00:00+08:00"><meta itemprop=dateModified content="2022-08-21T16:35:00+08:00"><meta itemprop=wordCount content="3467"><meta itemprop=image content="https://dilless.github.io/apple-touch-icon.png"><meta itemprop=keywords content="K8s,Kubernetes,基础,"><meta property="og:title" content="K8s 学习笔记（一）基础"><meta property="og:description" content="1. Kubernetes 介绍 1.1 应用部署方式的演变 直接部署在物理机 -> 虚拟化部署 -> 容器化部署 容器化部署方式给带来很多的便利，但是也会出现一些问题，比如说： 一个容器故"><meta property="og:type" content="article"><meta property="og:url" content="https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/"><meta property="og:image" content="https://dilless.github.io/apple-touch-icon.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-19T00:00:00+08:00"><meta property="article:modified_time" content="2022-08-21T16:35:00+08:00"><meta property="og:site_name" content="黄波的博客"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dilless.github.io/apple-touch-icon.png"><meta name=twitter:title content="K8s 学习笔记（一）基础"><meta name=twitter:description content="1. Kubernetes 介绍 1.1 应用部署方式的演变 直接部署在物理机 -> 虚拟化部署 -> 容器化部署 容器化部署方式给带来很多的便利，但是也会出现一些问题，比如说： 一个容器故"><meta name=application-name content="黄波的博客"><meta name=apple-mobile-web-app-title content="黄波的博客"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#252627"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/><link rel=prev href=https://dilless.github.io/posts/notes/devops/docker/imooc/12-docker-security/><link rel=next href=https://dilless.github.io/posts/notes/devops/k8s/itheima/2-k8s-getting-start/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><meta name=google-site-verification content="3_Zf27e0mNtTIsBWn36hi_d4KTxPd2Zh1dsZMVnKK8k"><meta name=baidu-site-verification content="code-VsfDko5mls"><meta name=360-site-verification content="1a8490494ad7f3fe3e0f7e4a61ce0775"><meta name=sogou_site_verification content="X0yE1Xexzf"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"K8s 学习笔记（一）基础","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/dilless.github.io\/posts\/notes\/devops\/k8s\/itheima\/1-k8s-base\/"},"genre":"posts","keywords":"K8s, Kubernetes, 基础","wordcount":3467,"url":"https:\/\/dilless.github.io\/posts\/notes\/devops\/k8s\/itheima\/1-k8s-base\/","datePublished":"2022-08-19T00:00:00+08:00","dateModified":"2022-08-21T16:35:00+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"黄波"},"description":""}</script></head><body header-desktop=sticky header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper github-corner=right><div class=header-title><a href=/ title=黄波的博客><img class="lazyload logo" src=/svg/loading.min.svg data-src=/apple-touch-icon.png data-srcset="/apple-touch-icon.png, /apple-touch-icon.png 1.5x, /apple-touch-icon.png 2x" data-sizes=auto alt=黄波的博客 title=黄波的博客><span class=header-title-text>黄波的博客</span></a><span class=header-subtitle>开发、学习、生活、技术分享</span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class='fa-solid fa-archive fa-fw fa-sm'></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class=menu-item><a class=menu-link href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/><i class='fa-solid fa-book fa-fw fa-sm'></i> 学习笔记</a></li><li class=menu-item><a class=menu-link href=/about/><i class='fa-solid fa-info-circle fa-fw fa-sm'></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item language"><span title=选择语言>简体中文<i class="dropdown-icon fa-solid fa-chevron-down"></i></span><ul class=sub-menu><li class=menu-item>没有更多翻译</li></ul></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=黄波的博客><img class="lazyload logo" src=/svg/loading.min.svg data-src=/apple-touch-icon.png data-srcset="/apple-touch-icon.png, /apple-touch-icon.png 1.5x, /apple-touch-icon.png 2x" data-sizes=auto alt=/apple-touch-icon.png title=/apple-touch-icon.png><span class=header-title-text>黄波的博客</span></a><span class=header-subtitle>开发、学习、生活、技术分享</span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class='fa-solid fa-archive fa-fw fa-sm'></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class=menu-item><a class=menu-link href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/><i class='fa-solid fa-book fa-fw fa-sm'></i> 学习笔记</a></li><li class=menu-item><a class=menu-link href=/about/><i class='fa-solid fa-info-circle fa-fw fa-sm'></i> 关于</a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li><li class="menu-item language"><span title=选择语言>简体中文<i class="dropdown-icon fa-solid fa-chevron-down"></i></span>
<select class=language-select onchange="location=this.value"><option disabled>没有更多翻译</option></select></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>K8s 学习笔记（一）基础</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://dilless.github.io title=作者 target=_blank rel="external nofollow noopener noreferrer author" class=author><i class="fa-solid fa-user-circle"></i>
黄波</a></span>
<span class=post-category>收录于 <a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;学习笔记</a>&ensp;<a href=/categories/k8s/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;K8s</a></span></div><div class=post-meta-line><span title="2022-08-19 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2022-08-19>2022-08-19</time>
</span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 3467 字&nbsp;
<i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 7 分钟&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title="K8s 学习笔记（一）基础">
<i class="fa-regular fa-eye fa-fw"></i>&nbsp;<span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class="details toc" id=toc-static kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-kubernetes-介绍>1. Kubernetes 介绍</a><ul><li><a href=#11-应用部署方式的演变>1.1 应用部署方式的演变</a></li><li><a href=#12-kubernetes-简介>1.2 Kubernetes 简介</a></li><li><a href=#13-kubernetes-组件>1.3 Kubernetes 组件</a></li><li><a href=#14-kubernetes-概念>1.4 Kubernetes 概念</a></li></ul></li><li><a href=#2-集群环境搭建>2. 集群环境搭建</a><ul><li><a href=#21-环境规划>2.1 环境规划</a><ul><li><a href=#211-集群类型>2.1.1 集群类型</a></li><li><a href=#212-安装方式>2.1.2 安装方式</a></li><li><a href=#213-主机规划>2.1.3 主机规划</a></li></ul></li><li><a href=#22-安装步骤>2.2 安装步骤</a></li></ul></li><li><a href=#3-资源管理>3. 资源管理</a><ul><li><a href=#31-资源管理介绍>3.1 资源管理介绍</a></li><li><a href=#32-yaml-语言>3.2 YAML 语言</a></li><li><a href=#33-资源管理方式>3.3 资源管理方式</a></li><li><a href=#331-命令式对象管理>3.3.1 命令式对象管理</a></li><li><a href=#332-命令式对象配置>3.3.2 命令式对象配置</a></li><li><a href=#333-声明式对象配置>3.3.3 声明式对象配置</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=1-kubernetes-介绍>1. Kubernetes 介绍</h2><h3 id=11-应用部署方式的演变>1.1 应用部署方式的演变</h3><blockquote><p>直接部署在物理机 -> 虚拟化部署 -> 容器化部署</p></blockquote><p>容器化部署方式给带来很多的便利，但是也会出现一些问题，比如说：</p><ul><li>一个容器故障停机了，怎么样让另外一个容器立刻启动去替补停机的容器</li><li>当并发访问量变大的时候，怎么样做到横向扩展容器数量</li></ul><p>这些容器管理的问题统称为<strong>容器编排</strong>问题，为了解决这些容器编排问题，就产生了一些容器编排的软件：</p><ul><li><strong>Swarm</strong>：Docker自己的容器编排工具</li><li><strong>Mesos</strong>：Apache的一个资源统一管控的工具，需要和Marathon结合使用</li><li><strong>Kubernetes</strong>：Google开源的的容器编排工具</li></ul><h3 id=12-kubernetes-简介>1.2 Kubernetes 简介</h3><p>kubernetes的本质是<strong>一组服务器集群</strong>，它可以在集群的每个节点上运行特定的程序，来对节点中的容器进行管理。目的是实现资源管理的自动化，主要提供了如下的主要功能：</p><ul><li><strong>自我修复</strong>：一旦某一个容器崩溃，能够在1秒中左右迅速启动新的容器</li><li><strong>弹性伸缩</strong>：可以根据需要，自动对集群中正在运行的容器数量进行调整</li><li><strong>服务发现</strong>：服务可以通过自动发现的形式找到它所依赖的服务</li><li><strong>负载均衡</strong>：如果一个服务起动了多个容器，能够自动实现请求的负载均衡</li><li><strong>版本回退</strong>：如果发现新发布的程序版本有问题，可以立即回退到原来的版本</li><li><strong>存储编排</strong>：可以根据容器自身的需求自动创建存储卷</li></ul><h3 id=13-kubernetes-组件>1.3 Kubernetes 组件</h3><p><img class=lazyload src=/svg/loading.min.svg data-src=images/image-20200406184656917.png data-srcset="/posts/notes/devops/k8s/itheima/1-k8s-base/images/image-20200406184656917.png, images/image-20200406184656917.png 1.5x, /posts/notes/devops/k8s/itheima/1-k8s-base/images/image-20200406184656917.png 2x" data-sizes=auto alt=/posts/notes/devops/k8s/itheima/1-k8s-base/images/image-20200406184656917.png title="Kubernetes 组件"></p><ul><li><strong>Master</strong>，集群的控制平面，负责集群管理：<ul><li>ApiServer：资源操作的唯一入口，接收用户输入的命令，提供认证、授权、API注册和发现等机制</li><li>Scheduler：集群资源调度，按照预定的调度策略将Pod调度到相应的node节点上</li><li>ControllerManager：维护集群的状态，比如程序部署安排、故障检测、自动扩展、滚动更新等</li><li>Etcd：存储集群中各种资源对象的信息</li></ul></li><li><strong>Node</strong>，集群的数据平面，负责为容器提供运行环境：<ul><li>Kubelet：维护容器的生命周期，即创建、更新、销毁容器</li><li>KubeProxy：集群内部的服务发现和负载均衡</li><li>Docker、Containerd：各种容器操作</li></ul></li></ul><p><strong>举例</strong>，部署一个 nginx 服务：</p><ol><li>首先要明确，一旦kubernetes环境启动之后，master和node都会将自身的信息存储到etcd数据库中</li><li>一个nginx服务的安装请求会首先被发送到master节点的apiServer组件</li><li>apiServer组件会调用scheduler组件来决定到底应该把这个服务安装到哪个node节点上在此时，它会从etcd中读取各个node节点的信息，然后按照一定的算法进行选择，并将结果告知apiServer</li><li>apiServer调用controller-manager去调度Node节点安装nginx服务</li><li>kubelet接收到指令后，会通知docker，然后由docker来启动一个nginx的pod。pod是kubernetes的最小操作单元，容器必须跑在pod中至此</li><li>一个nginx服务就运行了，如果需要访问nginx，就需要通过kube-proxy来对pod产生访问的代理这样，外界用户就可以访问集群中的nginx服务了</li></ol><h3 id=14-kubernetes-概念>1.4 Kubernetes 概念</h3><p><img class=lazyload src=/svg/loading.min.svg data-src=images/image-20200403224313355.png data-srcset="/posts/notes/devops/k8s/itheima/1-k8s-base/images/image-20200403224313355.png, images/image-20200403224313355.png 1.5x, /posts/notes/devops/k8s/itheima/1-k8s-base/images/image-20200403224313355.png 2x" data-sizes=auto alt=/posts/notes/devops/k8s/itheima/1-k8s-base/images/image-20200403224313355.png title="Kubernetes 概念"></p><ul><li>Master：集群控制节点，每个集群至少一个</li><li>Node：集群工作节点</li><li>Pod：K8s 最小控制单元，容器运行在 pod 中，一个 pod 可以运行多个容器</li><li>Controller： 控制器，实现对 pod 的管理，比如启动 pod、停止 pod、伸缩 pod</li><li>Service：pod 对外服务的统一入口，下面维护着同一类的多个 pod</li><li>Label：标签，对 pod 分类</li><li>NameSpace：命名空间，隔离 pod 的运行环境</li></ul><h2 id=2-集群环境搭建>2. 集群环境搭建</h2><h3 id=21-环境规划>2.1 环境规划</h3><h4 id=211-集群类型>2.1.1 集群类型</h4><p>kubernetes集群大体上分为两类：<strong>一主多从</strong>和<strong>多主多从</strong>。</p><ul><li>一主多从：一台Master节点和多台Node节点，搭建简单，但是有单机故障风险，适合用于测试环境</li><li>多主多从：多台Master节点和多台Node节点，搭建麻烦，安全性高，适合用于生产环境</li></ul><h4 id=212-安装方式>2.1.2 安装方式</h4><p>kubernetes有多种部署方式，目前主流的方式有kubeadm、minikube、二进制包</p><ul><li>minikube：一个用于快速搭建单节点kubernetes的工具</li><li>kubeadm：一个用于快速搭建kubernetes集群的工具</li><li>二进制包 ：从官网下载每个组件的二进制包，依次去安装，此方式对于理解kubernetes组件更加有效</li></ul><h4 id=213-主机规划>2.1.3 主机规划</h4><ul><li>本教程搭建 <code>1 主 2</code> 从集群</li><li>kube* version：<code>1.23.10</code>(1.24.x 移除了 dockershim， 跑不起来，通过 cri-dockerd 也不行，就用老版本了)</li><li>docker version：<code>20.10.17</code></li></ul><h3 id=22-安装步骤>2.2 安装步骤</h3><ul><li>初始化环境<ul><li>主机名解析(/etc/hosts)</li><li>时间同步(chronyd)</li><li>禁用 iptables, firewall, selinux, swap</li><li>网桥过滤和地址转发</li></ul></li><li>安装 docker, kubeadm, kubectl, kubelet</li><li>安装、配置 ipvs</li><li>init master, 添加 node</li><li>安装网络插件 flannel</li></ul><h2 id=3-资源管理>3. 资源管理</h2><h3 id=31-资源管理介绍>3.1 资源管理介绍</h3><p>在kubernetes中，所有的内容都抽象为资源，用户需要通过操作资源来管理kubernetes。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=images/image-20200406225334627.png data-srcset="/posts/notes/devops/k8s/itheima/1-k8s-base/images/image-20200406225334627.png, images/image-20200406225334627.png 1.5x, /posts/notes/devops/k8s/itheima/1-k8s-base/images/image-20200406225334627.png 2x" data-sizes=auto alt=/posts/notes/devops/k8s/itheima/1-k8s-base/images/image-20200406225334627.png title=资源管理></p><ul><li>kubernetes的本质上就是一个集群系统，用户可以在集群中部署各种服务，所谓的部署服务，其实就是在kubernetes集群中运行一个个的容器，并将指定的程序跑在容器中。</li><li>kubernetes的最小管理单元是pod而不是容器，所以只能将容器放在<code>Pod</code>中，而kubernetes一般也不会直接管理Pod，而是通过<code>Pod控制器</code>来管理Pod的。</li><li>Pod可以提供服务之后，就要考虑如何访问Pod中服务，kubernetes提供了<code>Service</code>资源实现这个功能。</li><li>如果Pod中程序的数据需要持久化，kubernetes还提供了各种<code>存储</code>系统。</li></ul><blockquote><p>学习kubernetes的核心，就是学习如何对集群上的<code>Pod、Pod控制器、Service、存储</code>等各种资源进行操作</p></blockquote><h3 id=32-yaml-语言>3.2 YAML 语言</h3><p><a href=https://www.ruanyifeng.com/blog/2016/07/yaml.html target=_blank rel="external nofollow noopener noreferrer">YAML 语言教程 - 阮一峰的网络日志<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1"></i></a></p><h3 id=33-资源管理方式>3.3 资源管理方式</h3><ul><li><p>命令式对象管理：直接使用命令去操作kubernetes资源</p><p><code>kubectl run nginx-pod --image=nginx:1.17.1 --port=80</code></p></li><li><p>命令式对象配置：通过命令配置和配置文件去操作kubernetes资源</p><p><code>kubectl create/patch -f nginx-pod.yaml</code></p></li><li><p>声明式对象配置：通过apply命令和配置文件去操作kubernetes资源</p><p><code>kubectl apply -f nginx-pod.yaml</code></p></li></ul><table><thead><tr><th>类型</th><th>操作对象</th><th>适用环境</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>命令式对象管理</td><td>对象</td><td>测试</td><td>简单</td><td>只能操作活动对象，无法审计、跟踪</td></tr><tr><td>命令式对象配置</td><td>文件</td><td>开发</td><td>可以审计、跟踪</td><td>项目大时，配置文件多，操作麻烦</td></tr><tr><td>声明式对象配置</td><td>目录</td><td>开发</td><td>支持目录操作</td><td>意外情况下难以调试</td></tr></tbody></table><blockquote><p>kubectl可以在node节点上运行吗?</p></blockquote><p>kubectl的运行是需要进行配置的，它的配置文件是$HOME/.kube，如果想要在node节点运行此命令，需要将master上的.kube文件复制到node节点上</p><blockquote><p>三种方式应该怎么用?</p></blockquote><ul><li>创建/更新资源：使用声明式对象配置 kubectl apply -f XXX.yaml</li><li>删除资源：使用命令式对象配置 kubectl delete -f XXX.yaml</li><li>查询资源：使用命令式对象管理 kubectl get(describe) 资源名称</li></ul><h3 id=331-命令式对象管理>3.3.1 命令式对象管理</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl <span class=o>[</span>command<span class=o>]</span> <span class=o>[</span>type<span class=o>]</span> <span class=o>[</span>name<span class=o>]</span> <span class=o>[</span>flags<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>comand</strong>：指定要对资源执行的操作，例如create、get、delete</li><li><strong>type</strong>：指定资源类型，比如deployment、pod、service</li><li><strong>name</strong>：指定资源的名称，名称大小写敏感</li><li><strong>flags</strong>：指定额外的可选参数</li></ul><p><strong>command</strong>：</p><table><tr><th>命令分类</th><th>命令</th><th>翻译</th><th>命令作用</th></tr><tr><td rowspan=6>基本命令</td><td>create</td><td>创建</td><td>创建一个资源</td></tr><tr><td>edit</td><td>编辑</td><td>编辑一个资源</td></tr><tr><td>get</td><td>获取</td><td>获取一个资源</td></tr><tr><td>patch</td><td>更新</td><td>更新一个资源</td></tr><tr><td>delete</td><td>删除</td><td>删除一个资源</td></tr><tr><td>explain</td><td>解释</td><td>展示资源文档</td></tr><tr><td rowspan=10>运行和调试</td><td>run</td><td>运行</td><td>在集群中运行一个指定的镜像</td></tr><tr><td>expose</td><td>暴露</td><td>暴露资源为Service</td></tr><tr><td>describe</td><td>描述</td><td>显示资源内部信息</td></tr><tr><td>logs</td><td>日志</td><td>输出容器在 pod 中的日志</td></tr><tr><td>attach</td><td>缠绕</td><td>进入运行中的容器</td></tr><tr><td>exec</td><td>执行</td><td>执行容器中的一个命令</td></tr><tr><td>cp</td><td>复制</td><td>在Pod内外复制文件</td></tr><tr><td>rollout</td><td>首次展示</td><td>管理资源的发布</td></tr><tr><td>scale</td><td>规模</td><td>扩(缩)容Pod的数量</td></tr><tr><td>autoscale</td><td>自动调整</td><td>自动调整Pod的数量</td></tr><tr><td rowspan=2>高级命令</td><td>apply</td><td>rc</td><td>通过文件对资源进行配置</td></tr><tr><td>label</td><td>标签</td><td>更新资源上的标签</td></tr><tr><td rowspan=2>其他命令</td><td>cluster-info</td><td>集群信息</td><td>显示集群信息</td></tr><tr><td>version</td><td>版本</td><td>显示当前Server和Client的版本</td></tr></table><p><strong>type</strong></p><table><tr><th>资源分类</th><th>资源名称</th><th>缩写</th><th>资源作用</th></tr><tr><td rowspan=2>集群级别资源</td><td>nodes</td><td>no</td><td>集群组成部分</td></tr><tr><td>namespaces</td><td>ns</td><td>隔离Pod</td></tr><tr><td>pod资源</td><td>pods</td><td>po</td><td>装载容器</td></tr><tr><td rowspan=8>pod资源控制器</td><td>replicationcontrollers</td><td>rc</td><td>控制pod资源</td></tr><tr><td>replicasets</td><td>rs</td><td>控制pod资源</td></tr><tr><td>deployments</td><td>deploy</td><td>控制pod资源</td></tr><tr><td>daemonsets</td><td>ds</td><td>控制pod资源</td></tr><tr><td>jobs</td><td></td><td>控制pod资源</td></tr><tr><td>cronjobs</td><td>cj</td><td>控制pod资源</td></tr><tr><td>horizontalpodautoscalers</td><td>hpa</td><td>控制pod资源</td></tr><tr><td>statefulsets</td><td>sts</td><td>控制pod资源</td></tr><tr><td rowspan=2>服务发现资源</td><td>services</td><td>svc</td><td>统一pod对外接口</td></tr><tr><td>ingress</td><td>ing</td><td>统一pod对外接口</td></tr><tr><td rowspan=3>存储资源</td><td>volumeattachments</td><td></td><td>存储</td></tr><tr><td>persistentvolumes</td><td>pv</td><td>存储</td></tr><tr><td>persistentvolumeclaims</td><td>pvc</td><td>存储</td></tr><tr><td rowspan=2>配置资源</td><td>configmaps</td><td>cm</td><td>配置</td></tr><tr><td>secrets</td><td></td><td>配置</td></tr></table><h3 id=332-命令式对象配置>3.3.2 命令式对象配置</h3><p>使用命令配合配置文件一起来操作kubernetes资源。</p><p>命令式对象配置的方式操作资源，可以简单的认为：命令 + yaml配置文件（里面是命令需要的各种参数）</p><h3 id=333-声明式对象配置>3.3.3 声明式对象配置</h3><p>声明式对象配置跟命令式对象配置很相似，但是它只有一个命令apply。</p><p>其实声明式对象配置就是使用apply描述一个资源最终的状态（在yaml中定义状态）</p><p>使用apply操作资源：</p><ul><li>如果资源不存在，就创建，相当于 kubectl create</li><li>如果资源已存在，就更新，相当于 kubectl patch</li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2022-08-21 16:35:00">更新于 2022-08-21</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/notes/devops/k8s/itheima/1-k8s-base/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/ data-title="K8s 学习笔记（一）基础" data-hashtags=K8s,Kubernetes,基础><i class="fa-brands fa-twitter fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/ data-hashtag=K8s><i class="fa-brands fa-facebook-square fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/ data-title="K8s 学习笔记（一）基础" data-web><i class="fa-brands fa-whatsapp fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/ data-title="K8s 学习笔记（一）基础"><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/ data-title="K8s 学习笔记（一）基础"><i class="fa-brands fa-weibo fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Myspace" data-sharer=myspace data-url=https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/ data-title="K8s 学习笔记（一）基础" data-description><i data-svg-src=/lib/simple-icons/icons/myspace.min.svg></i></a>
<a href=javascript:void(0); title="分享到 Blogger" data-sharer=blogger data-url=https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/ data-title="K8s 学习笔记（一）基础" data-description><i class="fa-brands fa-blogger fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://dilless.github.io/posts/notes/devops/k8s/itheima/1-k8s-base/ data-title="K8s 学习笔记（一）基础"><i class="fa-brands fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw"></i>&nbsp;<a href=/tags/k8s/>K8s</a>,&nbsp;<a href=/tags/kubernetes/>Kubernetes</a>,&nbsp;<a href=/tags/%E5%9F%BA%E7%A1%80/>基础</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/notes/devops/docker/imooc/12-docker-security/ class=prev rel=prev title="Docker 学习笔记（十二）容器安全"><i class="fa-solid fa-angle-left fa-fw"></i>Docker 学习笔记（十二）容器安全</a>
<a href=/posts/notes/devops/k8s/itheima/2-k8s-getting-start/ class=next rel=next title="K8s 学习笔记（二）入门">K8s 学习笔记（二）入门<i class="fa-solid fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=dilless/dilless.github.io data-repo-id=R_kgDOHr9Jag data-category=Announcements data-category-id=DIC_kwDOHr9Jas4CQ396 data-mapping=title data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-lang=zh-CN data-loading=lazy crossorigin=anonymous async defer></script><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.101.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel="external nofollow noopener noreferrer" title="FixIt v0.2.16-RC"><img class=fixit-icon src=/images/fixit.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright"><i class="fa-regular fa-copyright fa-fw"></i>
<span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>
<a href=https://dilless.github.io target=_blank rel="external nofollow noopener noreferrer">黄波</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div><div class="footer-line ibruce"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw"></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa fa-spinner fa-spin fa-fw"></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw"></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa fa-spinner fa-spin fa-fw"></i></span></span></div></div></footer></div><div class=widgets><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fa-solid fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fa-solid fa-comment fa-fw"></i></a></div><a href=https://github.com/dilless title="在 GitHub 上找到我" target=_blank rel="external nofollow noopener noreferrer" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js defer></script><script type=text/javascript src=/lib/lunr/lunr.min.js defer></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js defer></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.js defer></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js async defer></script><script type=text/javascript src=/lib/sharer/sharer.min.js async defer></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:10},comment:{giscus:{darkTheme:"dark",lightTheme:"light"}},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js defer></script><script type=text/javascript src=/js/_custom.min.js defer></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y7BJE11JP4",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-Y7BJE11JP4" async></script></body></html>